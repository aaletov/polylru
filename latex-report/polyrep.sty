\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{polyrep}
\RequirePackage[russian]{babel}
\RequirePackage{fontspec}
\RequirePackage{hyperref}
\RequirePackage{indentfirst}
\RequirePackage{listings}
% \RequirePackage{xcolor}
\RequirePackage{here}
\RequirePackage{array}
\RequirePackage{multirow}
\RequirePackage{graphicx}
% многостраничные таблицы
\RequirePackage{longtable}
\RequirePackage{amsmath}
\RequirePackage{amssymb}
\RequirePackage{csvsimple}
\RequirePackage{caption}
\RequirePackage{pdfpages}
% captionof
% toprule bottomrule etc.
\RequirePackage{booktabs}
% side-by-side images
\RequirePackage{caption}
\RequirePackage{subcaption}

\setmainfont{Times New Roman}

% biblio
\RequirePackage{csquotes}
\RequirePackage[
    backend=biber, 
    sorting=nyt,
    bibstyle=gost-authoryear,
    citestyle=gost-authoryear
]{biblatex}

\renewcommand{\lstlistingname}{Программа} % заголовок листингов кода

\RequirePackage{listings}

\definecolor{mauve}{rgb}{0.58,0,0.82}

\lstset{frame=shadowbox,
  rulesepcolor=\color{gray},
  language=Python,
  aboveskip=3mm,
  belowskip=3mm,
  showstringspaces=false,
  columns=flexible,
  basicstyle={\ttfamily},
  numbers=none,
  numberstyle=\color{black},
  keywordstyle=\color{blue},
  commentstyle=\color{green},
  stringstyle=\color{mauve},
  breaklines=true,
  breakatwhitespace=true,
  tabsize=3,
  xleftmargin=2em,
  framexleftmargin=2em,
  numbers=left,
  firstnumber=1,
  captionpos=b,
  extendedchars=\true,
  keepspaces=true,
  inputpath=listings,                     % директория с листингами
}


\RequirePackage[left=2cm,right=2cm,
top=2cm,bottom=2cm,bindingoffset=0cm]{geometry}

%% Нумерация картинок по секциям
\RequirePackage{chngcntr}
\counterwithin{figure}{section}
\counterwithin{table}{section}

%%Точки нумерации заголовков
\RequirePackage{titlesec}
\titlelabel{\thetitle.\quad}
\RequirePackage[dotinlabels]{titletoc}

%% Оформления подписи рисунка
\addto\captionsrussian{\renewcommand{\figurename}{Рисунок}}
\captionsetup[figure]{labelsep = period, justification=centering}

%% Подпись таблицы
\addto\captionsrussian{\renewcommand{\tablename}{Таблица}}
\captionsetup[table]{labelsep = period, justification=centering}

%% Подпись таблицы
%\DeclareCaptionFormat{hfillstart}{\hfill#1#2#3\par}
%\captionsetup[table]{format=hfillstart,labelsep=newline,justification=centering,skip=-10pt,textfont=bf}

%% Путь к каталогу с рисунками
\graphicspath{{fig/}}

%% Внесение titlepage в учёт счётчика страниц
\makeatletter
\renewenvironment{titlepage} {
 \thispagestyle{empty}
}

\makeatother
